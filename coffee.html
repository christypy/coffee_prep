<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å’–å•¡å‚™é¤ç¢ºèªç³»çµ± v3.0</title>
<style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f4f4f9; padding: 15px; color: #333; max-width: 600px; margin: 0 auto;}
    h2 { text-align: center; color: #4a3b32; margin-bottom: 15px; }
    
    /* æ§åˆ¶å€ */
    .controls { background: #fff; padding: 10px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
    select { padding: 10px; font-size: 16px; border-radius: 8px; border: 1px solid #ccc; width: 65%; }
    .btn { background: #dda15e; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 14px; }
    
    /* çµ±è¨ˆå€ - é›™æ¬„ä½ˆå±€ */
    .stats-container { display: flex; gap: 10px; margin-bottom: 20px; }
    .stat-box { flex: 1; background: #fff; border-radius: 10px; padding: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-top: 4px solid #4a3b32; }
    .stat-box h3 { margin: 0 0 8px 0; font-size: 15px; color: #4a3b32; text-align: center; border-bottom: 1px solid #eee; padding-bottom: 5px;}
    .stat-row { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 4px; }
    .stat-row.total { font-weight: bold; border-top: 1px dashed #ccc; margin-top: 5px; padding-top: 5px; color: #bc6c25; }

    /* åˆ—è¡¨å€ */
    .section-title { font-weight: bold; margin-top: 25px; margin-bottom: 8px; color: #dda15e; border-bottom: 2px solid #e0e0e0; padding-bottom: 2px; font-size: 18px; }
    .card { background: white; padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 6px solid #ddd; box-shadow: 0 1px 3px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: flex-start; }
    
    /* å¡ç‰‡é¡è‰²åˆ†é¡ */
    .card.latte { border-left-color: #bc6c25; }
    .card.americano { border-left-color: #283618; }
    .card.drip { border-left-color: #606c38; } /* æ‰‹æ²–å°ˆç”¨è‰² */
    
    .info-col { flex: 1; }
    .item-name { font-weight: bold; font-size: 17px; color: #222; }
    .item-desc { font-weight: bold; font-size: 16px; color: #444; }
    .item-detail { font-size: 13px; color: #666; margin-top: 4px; }
    
    .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 11px; margin-left: 5px; vertical-align: middle; }
    .tag-pre { background: #e9edc9; color: #5f6f22; border: 1px solid #5f6f22; }
    .tag-sugar { background: #ffddd2; color: #e26d5c; border: 1px solid #e26d5c; }
    .note-text { color: #d00000; font-size: 12px; display: block; margin-top: 2px; font-weight: bold;}

    .walk-in-section { background: #e8e8e8; padding: 15px; border-radius: 8px; margin-top: 30px; border: 1px dashed #999; }
    .walk-in-section h3 { margin-top: 0; color: #555; }
    .walk-in-section li { margin-bottom: 5px; font-size: 15px; }
</style>
</head>
<body>

<h2>â˜• å‚™é¤åŠ©ç† v3.0</h2>

<div class="controls">
    <select id="daySelect" onchange="renderOrders()">
        <option value="1">æ˜ŸæœŸä¸€</option>
        <option value="2">æ˜ŸæœŸäºŒ</option>
        <option value="3">æ˜ŸæœŸä¸‰</option>
        <option value="4">æ˜ŸæœŸå››</option>
        <option value="5">æ˜ŸæœŸäº”</option>
        <option value="6">æ˜ŸæœŸå…­</option>
        <option value="0">æ˜ŸæœŸæ—¥</option>
    </select>
    <button class="btn" onclick="renderOrders()">åˆ·æ–°åˆ—è¡¨</button>
</div>

<div class="stats-container">
    <div class="stat-box" style="border-top-color: #606c38;">
        <h3>ğŸ  å·¦å³é„°å±…</h3>
        <div id="stats-neighbor"></div>
    </div>
    <div class="stat-box" style="border-top-color: #bc6c25;">
        <h3>ğŸ›µ å…¶ä»–å€åŸŸ</h3>
        <div id="stats-other"></div>
    </div>
</div>

<div id="orderList">
    </div>

<div class="walk-in-section">
    <h3>ğŸƒ ä¾†åº—å®¢å‚™å¿˜</h3>
    <ul>
        <li><b>çŸ­é«®ç˜¦ç˜¦ï¼š</b>19-23gç²‰ / ç£¨8 (å†°/ç†±ç¾)</li>
        <li><b>ç•¢æ¥­ç”Ÿï¼š</b>å†°ç¾å¼</li>
        <li><b>æˆ´çœ¼é¡å…¬ä¸»é ­ï¼š</b>ç†±æ‹¿éµ</li>
        <li><b>èŠ­æ¨‚ï¼š</b>ç†±æ‹¿éµ + ç³–(3-5g)</li>
    </ul>
</div>

<script>
    // è³‡æ–™åº«ï¼šå·²æ›´æ–° TYPE æ¬„ä½ä»¥æ”¯æ´ç²¾ç´°åˆ†é¡
    const customers = [
        // å³é‚Šé„°å±…
        { loc: "å³é‚Šé„°å±…", name: "æ€¡é¦™è»’", item: "ç†±ç¾å¼", type: "hot_am", days: [] },
        { loc: "å³é‚Šé„°å±…", name: "æ²¹é£¯", item: "ç†±ç¾å¼", type: "hot_am", days: [], note: "æ¯æ—¥å•" },
        { loc: "å³é‚Šé„°å±…", name: "å±±åŸç±³é£Ÿ", item: "æ‹¿éµ", type: "hot_latte", days: [], tag: "å¯„æ¯" }, // å‡è¨­ç†±æ‹¿éµ
        { loc: "å³é‚Šé„°å±…", name: "æ©˜å­æ”¤", item: "æ‹¿éµ", type: "hot_latte", days: [] }, // å‡è¨­ç†±æ‹¿éµ
        { loc: "å³é‚Šé„°å±…", name: "ç³–æœ", item: "ç†±æ‹¿éµ", type: "hot_latte", days: [6, 0], tag: "ä»˜å…©å¤©" },

        // å·¦é‚Šé„°å±…
        { loc: "å·¦é‚Šé„°å±…", name: "å¸ƒè€é—†", item: "ç†±ç¾å¼", type: "hot_am", days: [5], tag: "å¯„æ¯" },
        { loc: "å·¦é‚Šé„°å±…", name: "ç‰›è‚‰", item: "ç†±æ‹¿éµ", type: "hot_latte", days: [3, 5, 0], tag: "+3gç³–" },
        { loc: "å·¦é‚Šé„°å±…", name: "ç”˜è”—é›", item: "å†°ç¾å¼", type: "ice_am", days: [] },
        { loc: "å·¦é‚Šé„°å±…", name: "åœ‹è¯å“¥", item: "å†°ç¾å¼", type: "ice_am", days: [] },

        // å…¶ä»–å€åŸŸ
        { loc: "è¿‘åå­—è·¯å£", name: "ç‰›è‚‰çˆ¸çˆ¸å…’å­", item: "å¤§æ‹¿éµ x2", count: 2, type: "large_hot_latte", days: [], note: "çˆ¸çˆ¸ç²‰20g" },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "é­šè€é—†", item: "å¤§æ‹¿éµ", type: "large_hot_latte", days: [2, 3, 5], tag: "å¯„æ¯" },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "é­šè€é—†é„°å±…(æ°´æœ)", item: "æ‹¿éµ", type: "hot_latte", days: [2, 3, 6, 0] }, // å‡è¨­ç†±æ‹¿éµ
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "å°è¾£æ¤’", item: "ç†±ç¾å¼", type: "hot_am", days: [] },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "è¦è€é—†", item: "ç†±ç¾å¼", type: "hot_am", days: [2, 4, 5, 6, 0] },
        // è²¢ä¸¸è€é—†æ‹†åˆ†æˆå…©ç­†ç´€éŒ„
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "è²¢ä¸¸è€é—† (æ‹¿)", item: "ç†±æ‹¿éµ", type: "hot_latte", days: [3, 0] },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "è²¢ä¸¸è€é—† (æ‰‹)", item: "ç†±æ‰‹æ²–", type: "hand_drip", days: [3, 0], note: "ç†±æ‰‹æ²–ï¼Œç¸½è¨ˆ$185" },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "è±åŸç´ é£Ÿ", item: "ç†±ç¾å¼", type: "hot_am", days: [3] },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "èœè€é—†", item: "ç†±æ‹¿éµ", type: "hot_latte", days: [] },
        { loc: "éåå­—è·¯å£ç›´è¡Œ", name: "è¿‘ä¸­å±±è·¯æ°´æœæ”¤", item: "ç†±ç¾å¼", type: "hot_am", days: [] },
        { loc: "éåå­—è·¯å£å³è½‰", name: "ç¦è¨˜å°é¢è±¬è‚‰", item: "ç†±ç¾å¼", type: "hot_am", days: [], tag: "å¯„æ¯" }
    ];

    // å“é …åç¨±å°æ‡‰è¡¨ (ç”¨æ–¼é¡¯ç¤ºåœ¨çµ±è¨ˆæ¬„)
    const typeNames = {
        hot_am: 'â˜• ç†±ç¾å¼',
        ice_am: 'ğŸ§Š å†°ç¾å¼',
        hot_latte: 'ğŸ”¥ ç†±æ‹¿éµ',
        ice_latte: 'â„ï¸ å†°æ‹¿éµ',
        large_hot_latte: 'ğŸ¥¤ å¤§ç†±æ‹¿',
        hand_drip: 'ğŸ’§ æ‰‹æ²–',
    };

    function renderOrders() {
        const day = parseInt(document.getElementById('daySelect').value);
        const listDiv = document.getElementById('orderList');
        const statsNeighborDiv = document.getElementById('stats-neighbor');
        const statsOtherDiv = document.getElementById('stats-other');
        
        listDiv.innerHTML = '';
        
        // åˆå§‹åŒ–çµ±è¨ˆç‰©ä»¶ (åŒ…å«æ‰€æœ‰ 6 ç¨®åˆ†é¡)
        const initialStats = { hot_am: 0, ice_am: 0, hot_latte: 0, ice_latte: 0, large_hot_latte: 0, hand_drip: 0 };
        let sNeigh = { ...initialStats };
        let sOther = { ...initialStats };

        let currentLoc = '';
        
        // éæ¿¾ç•¶æ—¥è¨‚å–®
        const todaysOrders = customers.filter(c => c.days.length === 0 || c.days.includes(day));

        todaysOrders.forEach(c => {
            let qty = c.count || 1;
            
            // åˆ¤æ–·æ˜¯å¦ç‚ºé„°å±… (å³é‚Šé„°å±… OR å·¦é‚Šé„°å±…)
            let isNeighbor = (c.loc === "å³é‚Šé„°å±…" || c.loc === "å·¦é‚Šé„°å±…");
            let targetStats = isNeighbor ? sNeigh : sOther;
            
            // çµ±è¨ˆé‚è¼¯ (ä½¿ç”¨æ–°çš„ type éµå€¼)
            if (targetStats[c.type] !== undefined) {
                 targetStats[c.type] += qty;
            }

            // æ¸²æŸ“æ¨™é¡Œ
            if (c.loc !== currentLoc) {
                listDiv.innerHTML += `<div class="section-title">${c.loc}</div>`;
                currentLoc = c.loc;
            }

            // å¡ç‰‡æ¨£å¼
            let cardClass = 'other';
            if(c.type.includes('am')) cardClass = 'americano';
            else if(c.type.includes('latte')) cardClass = 'latte';
            else if(c.type.includes('drip')) cardClass = 'drip';

            let tagsHtml = '';
            if(c.tag) {
                let tagStyle = c.tag.includes('ç³–') || c.tag.includes('ç²‰') ? 'tag-sugar' : 'tag-pre';
                tagsHtml += `<span class="tag ${tagStyle}">${c.tag}</span>`;
            }
            let noteHtml = c.note ? `<span class="note-text">âš ï¸ ${c.note}</span>` : '';

            listDiv.innerHTML += `
                <div class="card ${cardClass}">
                    <div class="info-col">
                        <div class="item-name">${c.name} ${tagsHtml}</div>
                        <div class="item-detail">${noteHtml}</div>
                    </div>
                    <div class="item-desc">${c.item}</div>
                </div>
            `;
        });

        // ç”¢ç”Ÿçµ±è¨ˆ HTML çš„å°å¹«æ‰‹å‡½å¼
        function makeStatHtml(stats) {
            let html = '';
            let totalCups = 0;
            
            for (const typeKey in typeNames) {
                if (stats[typeKey] > 0) {
                    html += `<div class="stat-row"><span>${typeNames[typeKey]}</span> <b>${stats[typeKey]} æ¯</b></div>`;
                    totalCups += stats[typeKey];
                }
            }
            if(html === '') {
                 html = '<div style="text-align:center;color:#999;font-size:12px;">ä»Šæ—¥ç„¡å›ºå®šè¨‚å–®</div>';
            } else {
                 html += `<div class="stat-row total"><span>ğŸ† ç¸½è¨ˆ</span> <b>${totalCups} æ¯</b></div>`;
            }
            return html;
        }

        statsNeighborDiv.innerHTML = makeStatHtml(sNeigh);
        statsOtherDiv.innerHTML = makeStatHtml(sOther);
    }

    // åˆå§‹åŒ–ï¼šè‡ªå‹•é¸æ“‡ä»Šå¤©
    const today = new Date().getDay();
    document.getElementById('daySelect').value = today;
    renderOrders();

</script>
</body>
</html>